import{_ as l,I as i,c as r,o as p,av as a,J as e,w as h}from"./chunks/framework.Cef0v0Gn.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"devops/process-manager-reference.md","filePath":"devops/process-manager-reference.md"}'),k={name:"devops/process-manager-reference.md"};function o(d,s,g,c,E,y){const n=i("MermaidChart"),t=i("ClientOnly");return p(),r("div",null,[s[0]||(s[0]=a('<p>This document describes the functions available for executing and managing processes.</p><h2 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-label="Permalink to “Types”">​</a></h2><ul><li><strong>Workspace</strong> <em>Settings for all workers</em></li><li><strong>Worker</strong> <em>Process settings</em></li></ul><h2 id="process-flow" tabindex="-1">Process Flow <a class="header-anchor" href="#process-flow" aria-label="Permalink to “Process Flow”">​</a></h2>',4)),e(t,null,{default:h(()=>[e(n,{code:"graph%20TD%0A%20%20%20%20User%5BUser%20Terminal%5D%20--%3E%7Cbun%20dev%7C%20BunWatch%5Bbun%20watch%5D%0A%20%20%20%20User%20--%3E%7Cbun%20start%7C%20BunRun%5Bbun%20dist%2F...%5D%0A%20%20%20%20%0A%20%20%20%20BunWatch%20--%3E%20Exec%5Bexec-process.ts%5D%0A%20%20%20%20BunRun%20--%3E%20Exec%0A%20%20%20%20%0A%20%20%20%20Exec%20--%3E%7CLoad%20Config%7C%20Env%5B.env%5D%0A%20%20%20%20Exec%20--%3E%7CInitialize%7C%20PM2%5BPM2%20Manager%5D%0A%20%20%20%20%0A%20%20%20%20PM2%20--%3E%7CSpawn%7C%20API%5BAPI%20Worker%5D%0A%20%20%20%20PM2%20--%3E%7CSpawn%7C%20Worker%5BBackground%20Worker%5D%0A%20%20%20%20%0A%20%20%20%20style%20PM2%20fill%3A%232196F3%2Cstroke%3A%23333%2Cstroke-width%3A2px%2Ccolor%3A%23fff%0A",showToolbar:"1"})]),_:1}),s[1]||(s[1]=a(`<h2 id="worker-configs" tabindex="-1">Worker configs: <a class="header-anchor" href="#worker-configs" aria-label="Permalink to “Worker configs:”">​</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tsx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  bun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  activated</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  heartbeat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Omit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;script&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> defaultConfigs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> pm2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  force: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_restarts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exec_mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fork&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autorestart: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  interpreter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bun&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_memory_restart: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;100M&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ignore_watch: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="methods" tabindex="-1">Methods: <a class="header-anchor" href="#methods" aria-label="Permalink to “Methods:”">​</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span></code></pre></div><h3 id="dev" tabindex="-1">dev <a class="header-anchor" href="#dev" aria-label="Permalink to “dev”">​</a></h3><p><em>bun --watch src/commands/exec-process.ts</em><code>Returns: Promise void.</code></p><p>The <code>bun</code> runner will watch the project files for any changes and automatically restart the process using the entry point <code>exec-process.ts</code>. In development mode, the system efficiently manages worker processes, ensuring that file changes trigger immediate reloads and that all child processes are properly cleaned up on exit (SIGINT/SIGTERM support).</p><p><strong>Parameters</strong></p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>--workers={nameworker}</span></span>
<span class="line"><span>--group={namegroup}</span></span></code></pre></div><p><strong>Detail</strong></p><ul><li><p><strong>bun</strong>: The high-performance runtime and package manager used.</p></li><li><p><strong>watch</strong>: Instructs the runner to observe the project files and automatically restart.</p></li><li><p><strong>workers</strong>: Starts a specific worker by name (e.g., <code>primary-webserver</code>).</p></li><li><p><strong>group</strong>: Starts all workers belonging to a group (e.g., <code>primary</code>).</p></li></ul><p>Example:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun dev --workers=primary-webserver</span></span>
<span class="line"><span> bun dev --group=primary</span></span></code></pre></div><h3 id="start" tabindex="-1">start <a class="header-anchor" href="#start" aria-label="Permalink to “start”">​</a></h3><p><em>bun dist/commands/exec-process.js</em><code>Returns: Promise void.</code></p><p>Runs the process in production mode using the Bun runtime and the pre-built files.</p><p><strong>Parameters</strong></p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>--workers={nameworker}</span></span>
<span class="line"><span>--group={namegroup}</span></span></code></pre></div><p>Example:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun start --group=primary</span></span>
<span class="line"><span> bun start # Falls back to --group=primary automatically if no group/worker specified</span></span></code></pre></div><blockquote><p>For the &#39;start&#39; command to work, you must first carry out the &#39;build&#39; process:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun build</span></span></code></pre></div></blockquote><p>If neither the &#39;workers&#39; nor the &#39;group&#39; parameter is defined in production, it will automatically fallback to <code>--group=primary</code>.</p>`,22))])}const F=l(k,[["render",o]]);export{m as __pageData,F as default};
