import{M as s}from"./chunks/theme.CxV42vEX.js";import{I as r,c as l,o as p,aF as e,J as h}from"./chunks/framework.CZ2lsOHd.js";const m=JSON.parse('{"title":"Process Manager Reference","description":"PM2 process management reference","frontmatter":{"title":"Process Manager Reference","description":"PM2 process management reference"},"headers":[],"relativePath":"devops/process-manager-reference.md","filePath":"devops/process-manager-reference.md"}'),o={name:"devops/process-manager-reference.md"},u=Object.assign(o,{setup(k){const a=[{id:"user",type:"multi-handle",label:"User Terminal",position:{x:0,y:75}},{id:"watch",type:"multi-handle",label:"bun watch",position:{x:200,y:25}},{id:"run",type:"multi-handle",label:"bun dist/...",position:{x:200,y:125}},{id:"exec",type:"multi-handle",label:"exec-process.ts",position:{x:400,y:75}},{id:"env",type:"multi-handle",label:".env",position:{x:550,y:0}},{id:"pm2",type:"multi-handle",label:"PM2 Manager",position:{x:550,y:150}},{id:"api",type:"multi-handle",label:"API Worker",position:{x:750,y:100}},{id:"bg",type:"multi-handle",label:"Bg Worker",position:{x:750,y:200}}],t=[{id:"e1",source:"user",target:"watch",sourceHandle:"right-source",targetHandle:"left",label:"bun dev",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e2",source:"user",target:"run",sourceHandle:"right-source",targetHandle:"left",label:"bun start",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e3",source:"watch",target:"exec",sourceHandle:"right-source",targetHandle:"left",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e4",source:"run",target:"exec",sourceHandle:"right-source",targetHandle:"left",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e5",source:"exec",target:"env",sourceHandle:"top-source",targetHandle:"left",label:"Load Config",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e6",source:"exec",target:"pm2",sourceHandle:"bottom-source",targetHandle:"left",label:"Init",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e7",source:"pm2",target:"api",sourceHandle:"right-source",targetHandle:"left",label:"Spawn",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed},{id:"e8",source:"pm2",target:"bg",sourceHandle:"right-source",targetHandle:"left",label:"Spawn",type:"smoothstep",animated:!0,markerEnd:s.ArrowClosed}];return(d,i)=>{const n=r("InteractiveFlow");return p(),l("div",null,[i[0]||(i[0]=e('<h1 id="process-manager-reference" tabindex="-1">Process Manager Reference <a class="header-anchor" href="#process-manager-reference" aria-label="Permalink to “Process Manager Reference”">​</a></h1><p>This document describes the functions available for executing and managing processes.</p><h2 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-label="Permalink to “Types”">​</a></h2><ul><li><strong>Workspace</strong> <em>Settings for all workers</em></li><li><strong>Worker</strong> <em>Process settings</em></li></ul><h2 id="process-flow" tabindex="-1">Process Flow <a class="header-anchor" href="#process-flow" aria-label="Permalink to “Process Flow”">​</a></h2>',5)),h(n,{nodes:a,edges:t}),i[1]||(i[1]=e(`<h2 id="worker-configs" tabindex="-1">Worker configs: <a class="header-anchor" href="#worker-configs" aria-label="Permalink to “Worker configs:”">​</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tsx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  bun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  activated</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  heartbeat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Omit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;script&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> defaultConfigs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> pm2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  force: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_restarts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exec_mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fork&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  autorestart: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  interpreter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bun&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_memory_restart: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;100M&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ignore_watch: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="methods" tabindex="-1">Methods: <a class="header-anchor" href="#methods" aria-label="Permalink to “Methods:”">​</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span></code></pre></div><h3 id="dev" tabindex="-1">dev <a class="header-anchor" href="#dev" aria-label="Permalink to “dev”">​</a></h3><p><em>bun --watch src/commands/exec-process.ts</em><code>Returns: Promise void.</code></p><p>The <code>bun</code> runner will watch the project files for any changes and automatically restart the process using the entry point <code>exec-process.ts</code>. In development mode, the system efficiently manages worker processes, ensuring that file changes trigger immediate reloads and that all child processes are properly cleaned up on exit (SIGINT/SIGTERM support).</p><p><strong>Parameters</strong></p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>--workers={nameworker}</span></span>
<span class="line"><span>--group={namegroup}</span></span></code></pre></div><p><strong>Detail</strong></p><ul><li><p><strong>bun</strong>: The high-performance runtime and package manager used.</p></li><li><p><strong>watch</strong>: Instructs the runner to observe the project files and automatically restart.</p></li><li><p><strong>workers</strong>: Starts a specific worker by name (e.g., <code>primary-webserver</code>).</p></li><li><p><strong>group</strong>: Starts all workers belonging to a group (e.g., <code>primary</code>).</p></li></ul><p>Example:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun dev --workers=primary-webserver</span></span>
<span class="line"><span> bun dev --group=primary</span></span></code></pre></div><h3 id="start" tabindex="-1">start <a class="header-anchor" href="#start" aria-label="Permalink to “start”">​</a></h3><p><em>bun dist/commands/exec-process.js</em><code>Returns: Promise void.</code></p><p>Runs the process in production mode using the Bun runtime and the pre-built files.</p><p><strong>Parameters</strong></p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>--workers={nameworker}</span></span>
<span class="line"><span>--group={namegroup}</span></span></code></pre></div><p>Example:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun start --group=primary</span></span>
<span class="line"><span> bun start # Falls back to --group=primary automatically if no group/worker specified</span></span></code></pre></div><blockquote><p>For the &#39;start&#39; command to work, you must first carry out the &#39;build&#39; process:</p><div class="language-command"><button title="Copy Code" class="copy"></button><span class="lang">command</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> bun build</span></span></code></pre></div></blockquote><p>If neither the &#39;workers&#39; nor the &#39;group&#39; parameter is defined in production, it will automatically fallback to <code>--group=primary</code>.</p>`,22))])}}});export{m as __pageData,u as default};
