bun test v1.3.9 (cf6cdbbb)

tests/domain/sso/routes.test.ts:
AUTHORIZE ERROR: {
  statusCode: 400,
  code: "ERR_REQUEST",
  error: "Bad Request ",
  message: "The client is closed",
}
25 | 			},
26 | 			headers: { "accept-language": "en" },
27 | 		});
28 | 
29 | 		if (response.statusCode === 400) console.log("AUTHORIZE ERROR:", response.json());
30 | 		expect(response.statusCode).toBe(302);
                                   ^
error: expect(received).toBe(expected)

Expected: 302
Received: 400

      at <anonymous> (/home/lucena/Área de trabalho/Codes/TypeScript-Boilerplate/backend/tests/domain/sso/routes.test.ts:30:31)
(fail) Domain - SSO Routes > Should redirect on /authorize with valid provider [137.99ms]
(pass) Domain - SSO Routes > Should fail on /authorize with invalid provider [20.00ms]
CALLBACK ERROR: {
  statusCode: 400,
  code: "ERR_REQUEST",
  error: "Bad Request ",
  message: "The client is closed",
}
74 | 			},
75 | 			headers: { "accept-language": "en" },
76 | 		});
77 | 
78 | 		if (response.statusCode === 400) console.log("CALLBACK ERROR:", response.json());
79 | 		expect(response.statusCode).toBe(200);
                                   ^
error: expect(received).toBe(expected)

Expected: 200
Received: 400

      at <anonymous> (/home/lucena/Área de trabalho/Codes/TypeScript-Boilerplate/backend/tests/domain/sso/routes.test.ts:79:31)
(fail) Domain - SSO Routes > Should process /callback and return normalized user on success [15.00ms]
(pass) Domain - SSO Routes > Should fail on /callback if missing code [19.00ms]
-----------------------------------------------|---------|---------|-------------------
File                                           | % Funcs | % Lines | Uncovered Line #s
-----------------------------------------------|---------|---------|-------------------
All files                                      |   51.15 |   69.60 |
 src/domain/credentials/constants.ts           |  100.00 |  100.00 | 
 src/domain/sso/actions/get-authorize.ts       |    0.00 |   35.71 | 7-15
 src/domain/sso/actions/get-callback.ts        |    0.00 |   33.33 | 6-13
 src/domain/sso/routes.ts                      |  100.00 |  100.00 | 
 src/domain/sso/schema.ts                      |  100.00 |  100.00 | 
 src/infrastructure/authentication/jwt.ts      |    0.00 |   12.28 | 24-30,34-47,51-66,70-80,85-86
 src/infrastructure/cache/connection.ts        |    0.00 |  100.00 | 
 src/infrastructure/languages/translate.ts     |  100.00 |  100.00 | 
 src/infrastructure/logs/handler.ts            |   42.86 |  100.00 | 
 src/infrastructure/pipes/crypto.ts            |    0.00 |   20.83 | 3,10-22,26-36,40-49,55-57
 src/infrastructure/pipes/safe-parse.ts        |  100.00 |   83.33 | 
 src/infrastructure/repositories/references.ts |   33.33 |   80.56 | 36-39,43-45
 src/infrastructure/server/authentication.ts   |    0.00 |   13.04 | 5-24
 src/infrastructure/server/interface.ts        |   13.33 |   57.02 | 66-71,74-79,90-95,98-103,119-129,132-133,136-137,140-141,144-145,148-149,152-153,156-157
 src/infrastructure/server/rate-limit.ts       |  100.00 |   69.23 | 15-17
 src/infrastructure/server/request.ts          |   40.00 |   17.57 | 6-32,40-73
 src/infrastructure/server/webserver.ts        |   23.08 |   84.15 | 55-56,63-65,78-85
 src/infrastructure/settings/cors.ts           |    0.00 |   75.00 | 10-13
 src/infrastructure/settings/environment.ts    |   75.00 |   80.77 | 44-45,47-51,53-55
 src/infrastructure/settings/helmet.ts         |  100.00 |  100.00 | 
 src/infrastructure/settings/plugins.ts        |  100.00 |  100.00 | 
 src/infrastructure/settings/swagger.ts        |  100.00 |  100.00 | 
 src/infrastructure/sso/oidc.ts                |    0.00 |    7.69 | 7-23,27-52,63-70,80-110,114-146,150-166
 src/infrastructure/sso/providers.ts           |  100.00 |  100.00 | 
-----------------------------------------------|---------|---------|-------------------

 2 pass
 2 fail
 4 expect() calls
Ran 4 tests across 1 file. [513.00ms]
